# Mảng và đối tượng

Mỗi mảng và đối tượng trong JS sẽ tham chiếu tới 1 vùng nhớ, khi so sánh 2 mảng hoặc 2 đối tượng, JS sẽ so sánh vùng nhớ của 2 mảng hoặc 2 đối tượng đó

Ví dụ: arr1 và arr2 là 2 mảng khác nhau, được tham chiếu tới 2 vùng nhớ khác nhau. Mỗi vùng nhớ này được thêm vào 1 phần tử là 10, nên dù nội dung trong 2 mảng này giống nhau, nhưng vì tham chiếu tới 2 vùng nhớ khác nhau nên 2 mảng này vẫn không bằng nhau

```js
new Array() === new Array();
new Object() === new Object();

const arr1 = new Array();
arr1.push(10);
const arr2 = new Array();
arr2.push(10);
arr1 === arr2;

const obj1 = new Object();
obj1.key = "something";
const obj2 = new Object();
obj2.key = "something";
obj1 === obj2;
```

# Gán đối tượng

Khi gán 1 mảng hoặc đối tượng cho 1 mảng hoặc đối tượng khác, nghĩa là cả 2 đang cùng trỏ về cùng 1 vùng nhớ, nên khi thay đổi dữ liệu trong vùng nhớ của 1 trong 2 thì cái còn lại cũng sẽ thay đổi

```js
const firstArray = [];
const secondArray = firstArray;
console.log(firstArray);
console.log(secondArray);

firstArray.push(10);
console.log(firstArray);
console.log(secondArray);
```

# Tính thay đổi

Trong ví dụ trên, `push` là 1 phương thức dùng để thay đổi mảng

# Tính bất biến

> Đối tượng bất biến là một đối tượng không thể thay đổi. Mỗi lần cập nhật tạo ra một giá trị mới, không làm thay đổi giá trị cũ

# Ý nghĩa của tính bất biến

-   React lưu trạng thái hiện tại và so sánh nó với trạng thái mới bằng cách sử dụng toán tử `===`
-   Nếu bạn thay đổi trạng thái mới, React không thể biết rằng nó đã thay đổi
-   React tự động hiển thị lại Component khi state === newState trả về false
-   Mỗi khi bạn có một trạng thái của mảng hoặc đối tượng, chúng phải là bất biến

Ví dụ:

```js
import { useState } from "react";

function App() {
    const [data, setData] = useState([]);

    function handleAddClick() {
        data.push(10);
        setData(data);
    }

    return <button onClick={handleAddClick}>Add 10</button>;
}
```

Đoạn code trên sẽ tương ứng với

```js
let state = [];
let newState = state;
state.push(10);

state === newState;
```

Vì state và newState đều cùng trỏ về 1 vùng nhớ nên khi so sánh state sẽ luôn bằng newState => React nhận thấy giá trị state không thay đổi => không render lại component
